# 3.3 Statistical Outlier Detection

## 3.3.1 Intro
- *Z-Score*:
	- <u>Recall</u>: If the absolute value of the z-score is bigger than 3 can be considered as outliers.
- *Fit a distribution, or mixture of distributions*:
	- **Outliers**: <u>observations with small values for the probability density function</u>.
- *Break Point Analysis*.
- *Peer Group Analysis*.
- *Association Rule*.

## 3.3.2 Break-Point Analysis #Break-Point 
#DEF **Break point indicates a sudden change in account behavior.**
<u>We are talking about intra-account fraud detection method.</u>
1. *Define* a <u>fixed</u> time window.
2. *Split* it into an <u>‚Äúold‚Äù and ‚Äúnew‚Äù</u> part.
3. *Compare* the new part with the old part.

<u>Old part</u> = local profile against which new observations are *compared*.

![[break-point_example.png|500]]

## 3.3.3 Peer-Group Analysis #Peer-Group
#DEF **Peer group is a group of accounts that behave similarly to the target account.**

> When the *behavior* of the target account **deviates substantially** from its peers, an *anomaly can be signaled*.

Peer-group analysis proceeds in <u>two steps</u>: 
1. Peer group *identification*.
2. Anomaly *Evaluation*.

### 3.3.3.1 Peer-Group Analysis Steps
1. The **peer group** <u>of a particular account</u> **is identified**.
	- Prior *business knowledge*.
	- *Statistical* way:
		- <u>Statistical similarity metrics</u> (Euclidean-based metrics).
2. **Number of peers**:
	- Too *small* (too local): <u>sensitive</u> to noise.
	- Too *large* (too global): <u>insensitive</u> to local important irregularities.
3. The **behavior of the target account is contrasted with its peers**:
	 - *Statistical test* (e.g., Student‚Äôs t-test).
	 - *Distance metric* (e.g., Mahalanobis Distance).

<u>Credit Card Fraud Example</u>:
‚ùìVerify whether the amount spent at time n is anomalous.

![[peer-group_example.png|500]]

## 3.3.4 Peer-group vs Break-point Analysis

***<u>Break-point analysis</u>*** | ***<u>Peer-group analysis</u>*** 
:---------------- | ----------------:
Tracks anomalies by considering **intra-account behavior**.| Tracks anomalies by considering **inter-account behavior**.

<u>In the Christmas Period example</u>: 
**Both** break-point and peer-group analysis *will detect local anomalies* rather than global anomalies.

## 3.3.5 Association Rule Analysis #AssociationRule
üí° #IDEA **Detect frequently occurring relationships between items**

üîë **Key input**: Transactions *database D* consisting of a *transaction identifier and a set of items I*.

An **association rule** is then an implication of the form **X ‚áí Y**, 
whereby *X ‚äÇ  I, Y ‚äÇ  I and X ‚à© Y = ‚àÖ*.
- <u>X Rule antecedent</u>.
- <u>Y Rule consequent</u>.

> **Association rules are stochastic in nature**: *statistical measures quantifying* the *strength of the association*.

### 3.3.5.1 Frequency, Support and Confidence

#DEF The **frequency** of an item set is measured by means of its **support**, *which is the percentage of total transactions in the database that contains the item set*.

$support(x) = \frac{\#\; of\; transactions\; supporting(x)}{total\; \#\; of\; transactions}$

#DEF **Frequent item set**: An *item set* with a *support higher than a
minimum value* specified by the data scientist (e.g., 10%).

#DEF The **confidence** measures the *strength of the association* and is defined as the *conditional probability of the rule consequent, given the rule antecedent*.

$confidence(X=>Y) = P(Y|X) = \frac{support(X\; \cup\; Y)}{support(X)}$

The data scientist has to specify a *minimum confidence* in order for an *association rule to be considered interesting*.

### 3.3.5.2 Insurance Fraud Example 
ü•Ö **Goal**: find *frequently occurring relationships/association rules* between the various parties involved.

*<u>Step 1</u>*: **Identify the frequent item sets**.
<u>Item set</u>: {insured A, police officer X, auto repair shop 1}.
**Support** =  3/10 -> *30%*

![[insurance-fraud_example.png|500]]

*<u>Step 2</u>*: **Derive Association Rules**.
*Multiple association rules* can be defined based on the same item set:
- If insured A and police officer X ‚áí auto repair shop 1
- If insured A and auto repair shop 1 ‚áí police officer X
- If insured A ‚áí auto repair shop 1 and police officer X

Recall: The *strength of an association rule* can be quantified by means of its **Confidence**.

‚§¥Ô∏è ‚ÄúIf insured A and police officer X ‚áí auto repair shop 1.‚Äù

<u>Antecedent item set</u>: {insured A, police officer X} *occurs in 4 transactions*.

![[insurance-fraud_example2.png|500]]
<u>3 out of 4 transactions contain the consequent item set</u> {auto repair shop 1}, **Confidence** = *75%*

---

Next chapter: [[3.04 - Clustering | Clustering]]